---
interface Project {
  id: string;
  title: string;
  description: string;
  technologies: string[];
  githubUrl: string;
  liveUrl?: string;
  stars?: number;
  forks?: number;
}

interface Props {
  projects: Project[];
}

const { projects } = Astro.props;
---

<section id="projects" class="featured-projects">
  <div class="container max-w-6xl mx-auto px-4">
    <header class="featured-projects__header">
      <span class="featured-projects__eyebrow">Featured</span>
      <h2 class="featured-projects__title text-3xl md:text-4xl font-bold">
        Projects
      </h2>
      <p class="featured-projects__subtitle">
        A small orbit of builds I keep leveling up.
      </p>
    </header>

    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
      {projects.map((project) => (
        <article class="project-card">
          <div class="project-card__top">
            <h3 class="project-card__title">{project.title}</h3>

            {(project.stars !== undefined || project.forks !== undefined) && (
              <div class="project-card__stats">
                {project.stars !== undefined && (
                  <span class="project-stat">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-4 h-4">
                      <path fill-rule="evenodd" d="M10.788 3.21a.75.75 0 0 1 1.424 0l1.778 5.51 5.791.043a.75.75 0 0 1 .442 1.346l-4.694 3.42 1.694 5.534a.75.75 0 0 1-1.147.84L12 16.897l-4.076 3.006a.75.75 0 0 1-1.147-.84l1.694-5.534-4.694-3.42a.75.75 0 0 1 .442-1.346l5.79-.043 1.78-5.51Z" clip-rule="evenodd" />
                    </svg>
                    {project.stars}
                  </span>
                )}
                {project.forks !== undefined && (
                  <span class="project-stat">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round" class="w-4 h-4">
                      <circle cx="6" cy="4" r="2"></circle>
                      <circle cx="18" cy="4" r="2"></circle>
                      <circle cx="12" cy="20" r="2"></circle>
                      <path d="M12 18V9"></path>
                      <path d="M12 9C12 7.343 10.657 6 9 6H6"></path>
                      <path d="M12 9C12 7.343 13.343 6 15 6H18"></path>
                    </svg>
                    {project.forks}
                  </span>
                )}
              </div>
            )}
          </div>

          <p class="project-card__desc">{project.description}</p>

          {project.technologies && project.technologies.length > 0 && (
            <div class="project-tags">
              {project.technologies.map((tech, index) => (
                <span class={`project-tag ${index % 2 === 0 ? "project-tag--primary" : "project-tag--secondary"}`}>
                  {tech}
                </span>
              ))}
            </div>
          )}

          <div class="project-card__footer">
            <a
              href={project.githubUrl}
              target="_blank"
              rel="noopener noreferrer"
              class="project-link project-link--primary"
            >
              <span>GitHub</span>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-4 h-4">
                <path fill-rule="evenodd" d="M12 2C6.477 2 2 6.485 2 12.017c0 4.425 2.865 8.18 6.839 9.504.5.092.682-.217.682-.483 0-.237-.008-.868-.013-1.703-2.782.605-3.369-1.343-3.369-1.343-.454-1.158-1.11-1.466-1.11-1.466-.908-.62.069-.608.069-.608 1.003.07 1.531 1.032 1.531 1.032.892 1.53 2.341 1.088 2.91.832.092-.647.35-1.088.636-1.338-2.22-.253-4.555-1.113-4.555-4.951 0-1.093.39-1.988 1.029-2.688-.103-.253-.446-1.272.098-2.65 0 0 .84-.27 2.75 1.026A9.564 9.564 0 0 1 12 4.844c.85.004 1.705.115 2.504.337 1.909-1.296 2.747-1.027 2.747-1.027.546 1.379.203 2.398.1 2.651.64.7 1.028 1.595 1.028 2.688 0 3.848-2.339 4.695-4.566 4.942.359.31.678.921.678 1.856 0 1.338-.012 2.419-.012 2.747 0 .268.18.58.688.482A10.019 10.019 0 0 0 22 12.017C22 6.485 17.523 2 12 2Z" clip-rule="evenodd" />
              </svg>
            </a>

            {project.liveUrl && (
              <a
                href={project.liveUrl}
                target="_blank"
                rel="noopener noreferrer"
                class="project-link project-link--ghost"
              >
                <span>Live Demo</span>
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-4 h-4">
                  <path d="M10 6H6a2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2v-4" />
                  <path d="M14 4h6m0 0v6m0-6L10 14" />
                </svg>
              </a>
            )}
          </div>
        </article>
      ))}
    </div>
  </div>
</section>

<style>
  .featured-projects {
    --fp-primary: var(--primary-accent, #5e9fff);
    --fp-primary-rgb: var(--primary-accent-rgb, 94, 159, 255);
    --fp-secondary: var(--secondary-accent, #c792ea);
    --fp-secondary-rgb: var(--secondary-accent-rgb, 199, 146, 234);
    --fp-text: rgba(248, 249, 255, 0.96);
    --fp-text-muted: rgba(248, 249, 255, 0.65);
    --fp-surface: rgba(255, 255, 255, 0.06);
    --fp-surface-strong: rgba(255, 255, 255, 0.12);
    --fp-border: rgba(255, 255, 255, 0.16);
    position: relative;
    padding: 4.5rem 0 5.5rem;
    font-family: "Manrope", "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
  }

  .featured-projects::before {
    display: none;
  }

  .featured-projects .container {
    position: relative;
    z-index: 1;
  }

  .featured-projects__header {
    text-align: center;
    margin-bottom: 2.75rem;
    color: var(--fp-text);
    position: relative;
    z-index: 1;
  }

  .featured-projects__eyebrow {
    display: inline-flex;
    align-items: center;
    gap: 0.5rem;
    text-transform: uppercase;
    letter-spacing: 0.4em;
    font-size: 0.7rem;
    color: rgba(248, 249, 255, 0.6);
    margin-bottom: 0.75rem;
  }

  .featured-projects__title {
    color: var(--fp-text);
  }

  .featured-projects__subtitle {
    margin-top: 0.75rem;
    color: var(--fp-text-muted);
    max-width: 32rem;
    margin-left: auto;
    margin-right: auto;
  }

  .project-card {
    position: relative;
    display: flex;
    flex-direction: column;
    gap: 1rem;
    padding: 1.5rem;
    border-radius: 20px;
    background: linear-gradient(150deg, var(--fp-surface), var(--fp-surface-strong));
    border: 1px solid var(--fp-border);
    box-shadow: 0 14px 28px rgba(2, 4, 10, 0.45);
    overflow: hidden;
    backdrop-filter: blur(6px);
    -webkit-backdrop-filter: blur(6px);
    transition: transform 180ms ease, box-shadow 180ms ease;
  }

  .project-card:hover {
    transform: translateY(-4px);
    box-shadow: 0 22px 40px rgba(2, 4, 10, 0.55);
  }

  .project-card__top {
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    gap: 1rem;
  }

  .project-card__title {
    font-size: 1.15rem;
    font-weight: 700;
    color: var(--fp-text);
  }

  .project-card__desc {
    color: rgba(248, 249, 255, 0.66);
    font-size: 0.95rem;
  }

  .project-card__stats {
    display: inline-flex;
    gap: 0.75rem;
    padding: 0.35rem 0.7rem;
    border-radius: 999px;
    background: rgba(255, 255, 255, 0.06);
    color: rgba(255, 255, 255, 0.85);
    border: 1px solid rgba(255, 255, 255, 0.08);
    font-size: 0.75rem;
    font-weight: 600;
  }

  .project-stat {
    display: inline-flex;
    align-items: center;
    gap: 0.35rem;
  }

  .project-stat svg {
    color: var(--fp-primary);
  }

  .project-tags {
    display: flex;
    flex-wrap: wrap;
    gap: 0.5rem;
  }

  .project-tag {
    padding: 0.2rem 0.65rem;
    border-radius: 999px;
    font-size: 0.7rem;
    font-weight: 600;
    letter-spacing: 0.02em;
    border: 1px solid transparent;
  }

  .project-tag--primary {
    color: rgba(255, 255, 255, 0.75);
    background: rgba(var(--fp-primary-rgb), 0.16);
    border-color: rgba(var(--fp-primary-rgb), 0.28);
  }

  .project-tag--secondary {
    color: rgba(255, 255, 255, 0.75);
    background: rgba(var(--fp-secondary-rgb), 0.16);
    border-color: rgba(var(--fp-secondary-rgb), 0.28);
  }

  .project-card__footer {
    display: flex;
    flex-wrap: wrap;
    gap: 0.75rem;
    margin-top: auto;
    padding-top: 0.75rem;
    border-top: 1px solid rgba(255, 255, 255, 0.08);
  }

  .project-link {
    position: relative;
    display: inline-flex;
    align-items: center;
    gap: 0.5rem;
    padding: 0.55rem 1.1rem;
    border-radius: 12px;
    font-size: 0.85rem;
    font-weight: 600;
    letter-spacing: 0.01em;
    text-decoration: none;
    border: 1px solid transparent;
    backdrop-filter: blur(4px);
    -webkit-backdrop-filter: blur(4px);
    transition: transform 160ms ease, box-shadow 160ms ease, border-color 160ms ease, color 160ms ease, background 160ms ease;
  }

  .project-link > span,
  .project-link > svg {
    position: relative;
    z-index: 1;
  }

  .project-link--primary {
    color: rgba(10, 12, 20, 0.92);
    background: linear-gradient(135deg, rgba(var(--fp-primary-rgb), 0.75), rgba(var(--fp-secondary-rgb), 0.75));
    border-color: rgba(255, 255, 255, 0.3);
    box-shadow: 0 10px 18px rgba(var(--fp-primary-rgb), 0.22);
  }

  .project-link--ghost {
    color: rgba(248, 249, 255, 0.8);
    background: rgba(8, 10, 18, 0.6);
    border-color: rgba(255, 255, 255, 0.14);
    box-shadow: 0 10px 18px rgba(4, 6, 14, 0.35);
  }

  .project-link:hover {
    transform: translateY(-1px);
  }

  .project-link--primary:hover {
    box-shadow: 0 16px 26px rgba(var(--fp-primary-rgb), 0.35);
  }

  .project-link--ghost:hover {
    color: #ffffff;
    background: rgba(255, 255, 255, 0.08);
    border-color: rgba(255, 255, 255, 0.3);
  }

  .project-link:focus-visible {
    outline: 2px solid rgba(var(--fp-primary-rgb), 0.6);
    outline-offset: 2px;
  }

  @media (max-width: 768px) {
    .project-card__top {
      flex-direction: column;
      align-items: flex-start;
    }
  }

  @media (prefers-reduced-motion: reduce) {
    .project-card,
    .project-link {
      transition-duration: 0.01ms !important;
    }
  }
</style>
